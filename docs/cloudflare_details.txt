# Cloudflare Configuration and Setup Guide
# Project: Government Complaint Management System

This document contains the configuration details, credentials, and setup instructions for deploying and scaling the application on the Cloudflare platform.

## 2. Admin Credentials (Secrets Management)

This section is for managing the admin login credentials securely. These will be used by a backend function (Cloudflare Worker) to authenticate the admin user.

### 2.1. Secret Variables
ADMIN_USERNAME - user name to login to admin portal
ADMIN_PASSWORD - password to login to admin portal
DEV_PASSWORD - password to login to dev portal


---

## 3. Cloudflare R2 (Image Storage)

This section is for configuring an R2 bucket to store the images uploaded by citizens and officers.

### 3.1. R2 Bucket Details
R2_BUCKET_NAME = gov-complaint-images
R2_PUBLIC_URL = https://pub-62cfd0f5ce354768976829718b8e95cd.r2.dev

### 3.2. R2 API Credentials
R2_ACCOUNT_ID = 3351b12e263723112deb6aff81a309f7
API TOKEN VALUE = xz4yEgKQpbPaNXRUvoKipEVBYa_4gY-Yxw2uwmOj
R2_ACCESS_KEY_ID = 91a06a7c40c26436f88f33ebd024085d
R2_SECRET_ACCESS_KEY = 912f901bb5fc0a5f9306408750d0d0ecef7056b925dab0fb1c32f1b734bbe227 
S3 API - https://3351b12e263723112deb6aff81a309f7.r2.cloudflarestorage.com


## 4. Cloudflare D1 (Database for Complaints)

This section is for configuring a D1 database to store complaint data.

### 4.1. D1 Database Details
D1_DATABASE_NAME = complaints_db
D1_DATABASE_ID = af879244-afaa-4fb0-afa9-3e4b39cda40f

### 4.2. D1 Table Schema
This is the proposed schema for the main complaints table.
```sql
CREATE TABLE complaints (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    location TEXT NOT NULL,
    description TEXT NOT NULL,
    contact TEXT,
    status TEXT NOT NULL DEFAULT 'pending',
    assigned_to TEXT,
    before_image_url TEXT NOT NULL,
    after_image_url TEXT,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);
```

### 4.3. Setup Instructions
1.  **Create Database (CLI Method is recommended):**
    ```bash
    # Create the database
    npx wrangler d1 create complaints_db

    # The command will output the database name and ID.
    # Copy the database ID for the next step.
    ```
2.  **Create Table:**
    *   Create a file named `schema.sql` with the content from section 4.2.
    *   Run the following command:
    ```bash
    npx wrangler d1 execute complaints_db --file=./schema.sql
    ```
3.  **Bind Database to Project:**
    *   In your Pages project settings > **Functions** > **D1 database bindings**, click **Add binding**.
    *   Enter a **Variable name** for your code to use (e.g., `DB`).
    *   Select your D1 database (`complaints_db`).
    *   Click **Save**.
